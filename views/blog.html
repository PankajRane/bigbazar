<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>fbb Blog Star</title>

    <!-- Bootstrap -->
    <link href="../stylesheet/bootstrap.min.css" rel="stylesheet" />
    <link href="../stylesheet/layout.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,700,100" rel="stylesheet" type="text/css" />
    <link href="../stylesheet/main.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" />
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="shortcut icon" href="../images/favicon.png" />
    <style>
      .ontop {
        height: auto;z-index: 1;top: 3px;
        float: right;right: 2px;opacity: 1;
        color: #fff;padding: 20px 15px;font-size: 16px;
        display: none;position: absolute;background-color: red
      }
      .ontopSucess {
        height: auto;z-index: 1;top: 3px;
        float: right;right: 2px;opacity: 1;
        color: #fff;padding: 20px 15px;font-size: 16px;
        display: none;position: absolute;background-color: green
      }
      #popup {
        width: 300px;height: 200px;position: absolute;
        color: #000000;background-color: #ffffff;top: 50%;
        left: 50%;margin-top: -100px;margin-left: -150px;
      }
    </style>
    <script type="text/javascript">
      function pop(div) {
        document.getElementById(div).style.display = 'block';
        // alert('pop');
      }
      function hide(div) {
        document.getElementById(div).style.display = 'none';
      }
      //To detect escape button
      document.onkeydown = function(evt) {
        evt = evt || window.event;
        if (evt.keyCode == 27) {
          hide('popDiv');
        }
      };
    </script>
</head>
<body>
  <div class="full_width_bg index submit-blog ">
    <div id="submit_popup">
      </div>
      <div class="row" style="margin:0px;">
          <div class="header_section">
              <div class="sant">
                  <div class="col-xs-12 col-sm-3 col-md-3">
                        <a href="/users/home" target="_blank" class="logo_section">
                            <img src="../images/Logo1.png"  class="img_section">
                        </a>
                  </div>
                  <!--<div class="pull-right text-center">-->
                      <div class="col-xs-12 col-sm-9 col-md-9">
                          <div class="menu_section">
                              <div class="tp-a-hov">
                                <!-- social Share -->
                                <i class="fa fa-facebook tp-mar20 sty-txt" onclick="fbShare()"></i>
                                <a class="tp-mar20 sty-txt" href="https://twitter.com/intent/tweet?text=Hey Guys join fbb Blog Star campaign and %20world">
                                    <i class="fa fa-twitter"></i>
                                </a>
                              <i class="fa fa-linkedin tp-mar20 sty-txt" onclick="shareContent()"></i>
                              <!-- End of social Share -->
                            </div>
                            <div class="btn_menu">
                               <button type="button" onclick="window.location = '/users/list'" class="btn-txt">
                                    <i class="fa fa-rss sub-fa" title="Explore Bloggers"></i><b class="xs_hideen">EXPLORE BLOGGERS</b>
                              </button>
                              <button type="button" onclick="window.location = '/users/profile'" class="btn-txt">
                                  <i class="fa fa-cog sub-fa" title="Settings"></i><b class="xs_hideen">SETTINGS</b>
                              </button>
                              <button onclick="logout()" type="button" class="btn-txt">
                                  <i class="fa fa-lock sub-fa" title="Sign Out"></i><b class="xs_hideen">SIGN OUT</b>
                              </button>
                            </div>
                        </div>
                    </div>
                <!--</div>-->
            </div>
        </div>
    </div>
  </div>
  <div class="blog-section">
      <div class="opt-bg">
          <div class="row" style="margin:0px;">
            <div class="col-sm-12 col-md-12">
                <div class="crusader-section">
                    <h3>Got the nerve to be
                      a Digital Crusader</h3>
                    <div class="num-txt-section">
                        <span>rounds</span>
                        <div class="numder-section">
                            <img src="../images/numone.png" alt="" />
                            <p>Select any fit from http://boldissexy.in/ ,
                              Mention the fbb fit name of the denims you
                              are wearing and style % different looks of
                              yourself wearing the same denims</p>
                        </div>
                        <div class="numder-section">
                            <img src="../images/numtwo.png" alt="" />
                            <p>Top 100 participants receive fbb GIFT Vouchers
                              and writ on a new  Topic. FInal 30 to be selected
                              by a panel of judges led by VRAUN DHAWAN</p>
                        </div>
                        <div class="numder-section">
                            <img src="../images/numthree.png" alt="" />
                            <p class="boder-none">Top 30 WInners to fly down to Mumbai for an
                              exclusive events as they get awarded the
                              Annual Contract for Fbb and Entry into the
                              fbb elite club</p>
                        </div>
                    </div>
                </div>
              </div>
            </div>
          <div class="row" style="margin:0px;">
            <div class="col-sm-6 col-md-6">
                <div class="row">
                    <div class="videosection" style="margin-top: 18px;">
                        <center>
                            <video width="90%" height="300" controls>
                                <source src="../images/LogoFinalEdited.mp4" type="video/mp4">
                            </video>
                        </center>
                         <!--<center>
                            <form>
                                <% if (locals.messages.info) { %>
                                    <input type="text" name="blog_url" class="" id="blog_url" placeholder="ENTER YOUR BLOG URL" style="" disabled>
                                    <button type="button" onclick="submitBlog()" name="submit" class="blog_submit" disabled>Blog already Submitted</button>
                                <% } else { %>
                                    <input type="text" name="blog_url" class="" id="blog_url" placeholder="ENTER YOUR BLOG URL" style="">
                                    <button type="button" onclick="submitBlog()" name="submit" class="blog_submit">Submit</button>
                                <% } %>
                            </form>
                         </center>-->

                    </div>
                </div>
            </div>
            <div class="col-sm-6 col-md-6">
                  <div class="form-section" style="margin-top: 18px;">
                    <form>
                        <h3 class="txt-submit">Submit Your Blog<h3>
                        <div class="form-group">
                              <input type="text" name="name" id="userName" class="form-control" placeholder="Name">
                        </div>
                        <div class="form-group">
                              <input type="tel" name="phone" id="phone" class="form-control" placeholder="Phone">
                        </div>
                        <div class="form-group col-md-6 select-dropleft">
                            <select class="form-control" id="ageSelect">
                              <option value="0">Age</option>
                              <option value="18-20">18-20</option>
                              <option value="21-25">21-25</option>
                              <option value="26-30">26-30</option>
                              <option value="31-35">31-35</option>
                              <option value="36-40">36-40</option>
                              <option value="41-45">41-45</option>
                              <option value="46-50">46-50</option>
                              <option value="51-55">51-55</option>
                              <option value="56-60">56-60</option>
                              <option value="61-65">61-65</option>
                              <option value="66-70">66-70</option>
                              <option value="71-75">71-75</option>
                              <option value="76-80">76-80</option>
                            </select>
                      </div>
                      <div class="form-group col-md-6 select-dropright">
                          <!--<select class="form-control" id="citySelect">
                              <option value="0">City</option>
                              <option value="New Delhi">New Delhi</option>
                              <option value="Mumbai">Mumbai</option>
                              <option value="Bengaluru">Bengaluru</option>
                              <option value="Tamil Nadu">Tamil Nadu</option>
                            </select>-->
                            <input type="text" name="city" id="citySelect" class="form-control" placeholder="City">
                      </div>
                      <div class="form-group">
                          <input type="email" id="newEmail" class="form-control" placeholder="E-mail">
                      </div>
                      <div class="form-group">
                          <input type="text" id="blog_url" name="blog_url" class="form-control" placeholder="Web Url">
                      </div>
                      <div class="form-group row">
                          <div class="offset">
                            <% if (locals.messages.info) { %>
                              <button type="button" onclick="submitBlog()" class="btn btn-primary" id="submit-form" disabled>Blog Already Added</button>
                              <% } else { %>
                                <button type="button" onclick="submitBlog()" class="btn btn-primary" id="submit-form">Submit</button>
                                <% } %>
                          </div>
                      </div>
                  </form>
                </div>
            </div>
        </div>
    </div>
      <div id="popDiv" class="ontopSucess">
      </div>
      <div id="popDiverror" class="ontop">
      </div>
    </div>
    <div class="page-footer">
        <div class="page-footer-inner copy_txt"> Copyright © 2016 Big Bazzer. All rights reserved.</div>
        <div class="scroll-to-top"><i class="icon-arrow-up"></i></div>
    </div>
    <!-- Modal -->
    <div class="modal fade success" id="myModal" role="dialog">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <span class="success_icon"><i class="fa fa-check-circle"></i></span>
                </div>
                <div class="modal-body">
                  <p>Thanks for your Submission</p>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal -->
    <!--<div class="modal fade" id="thanku" role="dialog">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-body">
                  <button type="button" class="close" data-dismiss="modal">&times;</button>
                  <div class="txt_thanku">
                    <h1>Thanks for your Submission</h1>
                  </div>
                </div>
            </div>
        </div>
    </div>-->
    <!-- Modal -->
    <div class="modal fade error" id="errorModal" role="dialog">
        <div class="modal-dialog">
            <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <span class="error_icon"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="modal-body">
          <p>Blog was already uploaded.</p>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade wraning" id="wraningModal" role="dialog">
    <div class="modal-dialog">
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <span class="wraning_icon"><i class="fa fa-exclamation-triangle"></i></span>
        </div>
        <div class="modal-body">
          <p>Technical Error Please try after some time.</p>
        </div>
      </div>
    </div>
  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="../js/bootstrap.min.js"></script>
  <script type="text/javascript">
      function logout(){
         $.get( "/users/logout", { })
                  .done(function( data ) {
                    window.location = "/users/login"
                  });
      }

      function submitBlog(){
        var urlVal = document.getElementById("blog_url").value;
        var age = document.getElementById("ageSelect").value;
        var city = document.getElementById("citySelect").value;
        var name= document.getElementById("userName").value;
        var newEmail= document.getElementById("newEmail").value;
        var phone = document.getElementById("phone").value;

        var filter = /^([a-zA-Z0-9_.-])+@(([a-zA-Z0-9-])+.)+([a-zA-Z0-9]{2,4})+$/;
        var phoneNum = phone.replace(/[^\d]/g, '');

        if(validateURL(urlVal) && filter.test(newEmail) && name.length !=0 && phoneNum.length > 6 && phoneNum.length < 11 && city.length !=0 && age !=0){
            $.post( "/users/blogPost", {"blog_url": urlVal, "age": age, "city": city, "Blogusername": name, "email": newEmail, "phone": phone })
                    .done(function( data ) {
                      console.log('------------------ ', data);
                      console.log('data:-- ', JSON.stringify(data));
                      if(data.code == 200){
                          // var Message = data.message;

                          document.getElementById("submit_popup").innerHTML =
                          '<p class="succe_txt">Your Blog is uploaded Sucessfully. <a href="" onClick="hide("submit_popup")"><i class="fa fa-close f-alert"></i></a></p>';
                          //alert('uploaded');
                          //pop('popDiv');
                          // window.location = "/users/home";
                      }
                      else if(data.code == 100){
                          var errorMessage = data.message;
                          console.log('errorMessage:- ',errorMessage);
                          document.getElementById("submit_popup").innerHTML =
                           '<p class="error-txt">Blog is already uploaded for current round. <a href="" onClick="hide("submit_popup")"><i class="fa fa-close f-alert"></i></a></p>';
                           //alert('not uploaded');
                          // pop('popDiverror');
                      }
                      else{
                          var errorMessage = data.message;
                          document.getElementById("submit_popup").innerHTML = '<p class="error-txt">Technical Error. Please try after some time.<a href="" onClick="hide("submit_popup")"><i class="fa fa-close f-alert"></i></a>';
                          // pop('popDiverror');
                      }
                    });
        }
        else if (name.length == 0) {
          document.getElementById('submit_popup').innerHTML= '<p class="error-txt">Name cannot be empty <a href="" onClick="hide("submit_popup")">&times;</a></p>';
        }
        else if (!(phoneNum.length > 6 && phoneNum.length < 11)) {
          document.getElementById('submit_popup').innerHTML= '<p class="error-txt">Enter a valid phone number <a href="" onClick="hide("submit_popup")">&times;</a></p>';
        }
        else if (age == 0) {
          document.getElementById('submit_popup').innerHTML= '<p class="error-txt">Enter your age <a href="" onClick="hide("submit_popup")">&times;</a></p>';
        }
        else if (city.length == 0) {
          document.getElementById('submit_popup').innerHTML= '<p class="error-txt">Enter your city <a href="" onClick="hide("submit_popup")">&times;</a></p>';
        }
        else if(!filter.test(newEmail)){
          document.getElementById('submit_popup').innerHTML= '<p class="error-txt">Enter a valid Email <a href="" onClick="hide("submit_popup")">&times;</a></p>';
        }
      else{
        document.getElementById('submit_popup').innerHTML= '<p class="error-txt">Input Blog Url is not valid. <a href="" onClick="hide("submit_popup")">&times;</a></p>';
      }

       }

       function validateURL(textval) {
  var urlregex = new RegExp( "^(http|https|ftp)\://([a-zA-Z0-9\.\-]+(\:[a-zA-Z0-9\.&amp;%\$\-]+)*@)*((25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9])\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0)\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0)\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[0-9])|([a-zA-Z0-9\-]+\.)*[a-zA-Z0-9\-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(\:[0-9]+)*(/($|[a-zA-Z0-9\.\,\?\'\\\+&amp;%\$#\=~_\-]+))*$");
  return urlregex.test(textval);
}


    </script>
</body>

</html>
